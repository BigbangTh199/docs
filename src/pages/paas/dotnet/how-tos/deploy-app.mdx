import Layout from "@/components/Layout";
import Button from "@/components/Common/button";
import Section from "@/components/Common/section";
import Alert from "@/components/Common/alert";
import Tabs from "@/components/Common/tab";
import Step from "@/components/Common/step";
import Card from "@/components/Common/card";
import Important from "@/components/Common/important";
import Highlight from "@/components/Common/highlight";
import Link from "next/link";
import { GoArrowLeft, } from "react-icons/go";
import NextPage from "@/components/Common/nextpage";


<Layout>

# استقرار برنامه NET. در لیارا
<hr className="mb-2" />

        <Tabs 
    tabs={["Liara Console", "Liara CLI"]} 
    content={[
        <>
        <p>
            در ابتدا، پس از <a className="blue-link" href="./create-app">ساخت برنامه</a> بایستی تمام فایل‌ها و پوشه‌هایی که قصد ندارید در لیارا آپلود شوند را، از پروژه پاک کنید. به عنوان مثال، باید پوشه‌های vscode. و nupkg را از پروژه خود پاک کنید؛ چرا که لیارا در حین فرایند استقرار، آن‌ها را برای شما ایجاد خواهد کرد. به صورت کلی، اگر که در پروژه خود فایلی به نام <Important>gitignore.</Important> دارید، کافیست تا فایل‌های و دایرکتوری‌های اشاره شده در این فایل را، از پروژه خود پاک کنید.
        </p>

        <p>
            همچنین، پروژه شما باید شامل یک فایل با پسوند <Important>csproj.</Important> باشد؛
            فایل <Important>csproj.</Important> به طور خودکار با ایجاد پروژه ساخته می‌شود و شامل تنظیمات و اطلاعاتی مانند نام پروژه، نسخه NET. مورد استفاده، وابستگی‌ها و ... می‌باشد. به عنوان مثال، محتوای یک فایل csproj. برای یک پروژه کنسولی می‌تواند به صورت زیر باشد:
        </p>
        <div className="h-4" />
        <div dir='ltr'>
            <Highlight className="csproj">
                {`<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net6.0</TargetFramework>
  </PropertyGroup>

</Project>
`}
            </Highlight>
        </div>
        <div className='h-4' />        
        <p>
            در ادامه، بایستی پوشه پروژه خود را درون یک فایل zip قرار بدهید؛ سپس در برنامه خود، بر روی گزینه <b>استقرار جدید</b> کلیک کرده؛ فایل zip را بکشید و در باکس آپلود تعبیه شده، رها کنید تا وارد مرحله بعدی استقرار شوید:
        </p>
        <img src="https://files.liara.ir/liara/docs/deploy-app-using-console.gif" alt="deploy app using console" />
        <div className="h-4" />
        <p>
            پس از آپلود پروژه، باید شخصی‌سازی‌های پروژه را در برنامه خود، لحاظ کنید:
        </p>
        <div className="h-4" />
        <img src="https://files.liara.ir/liara/docs/deploy-dotnet-app-using-console.gif" alt="build app on liara" />
        <div className="h-4" />
        <p>
            در انتها، به صورت مستقیم به <a href="../../details/private-registery" className="blue-link">صفحه تاریخچه برنامه</a> هدایت می‌شوید که می‌توانید لاگ‌های مربوط به استقرار را در آن، مشاهده بفرمایید. 
        </p>

    </>,
    <>

        <p>
            پس از <a className='blue-link' href="./create-app">ساخت برنامه</a>، باید در مسیر اصلی پروژه، یک فایل به نام <Important>liaraignore.</Important> یا <Important>gitignore.</Important> ایجاد کنید و درون آن، اسامی تمامی فایل‌ها یا پوشه‌هایی که قصد ندارید در لیارا آپلود شوند را، وارد کنید؛ به عنوان مثال، نیازی به آپلود دایرکتوری‌های obj و bin به همراه محتوای آن‌ها نیست؛ چرا که لیارا در حین استقرار برنامه، آن‌ها را برای شما می‌سازد؛ پس بایستی اسامی این دایرکتوری‌ها در یکی از دو فایل فوق، نوشته شود؛ قطعه کد قرار گرفته در لینک زیر، یک <Important>gitignore.</Important> عالی برای برنامه‌های NET. است که می‌توانید از آن، استفاده کنید:
        </p>
        <div className="h-2" />
        <Link href="https://github.com/liara-cloud/gitignore-templates/blob/master/dotnet/.gitignore" target="_blank">
            <Card className="flex cursor-pointer w-full items-center justify-between">
                <div className="flex items-center gap-3">
                <h4>
                    نمونه فایل <Important>gitignore.</Important> برای برنامه‌های NET.
                </h4>
                </div>
                <GoArrowLeft className="ml-1" />
            </Card>
        </Link>
        <div className="h-2" />
        <p>
            همچنین، پروژه شما باید شامل یک فایل با پسوند <Important>csproj.</Important> باشد؛
            فایل <Important>csproj.</Important> به طور خودکار با ایجاد پروژه ساخته می‌شود و شامل تنظیمات و اطلاعاتی مانند نام پروژه، نسخه NET. مورد استفاده، وابستگی‌ها و ... می‌باشد. به عنوان مثال، محتوای یک فایل csproj. برای یک پروژه کنسولی می‌تواند به صورت زیر باشد:
        </p>
        <div className="h-4" />
        <div dir='ltr'>
            <Highlight className="csproj">
                {`<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net6.0</TargetFramework>
  </PropertyGroup>

</Project>
`}
            </Highlight>
        </div>
        <div className='h-4' />   
        <p>
            در ادامه، در مسیر اصلی پروژه، یک فایل به نام <Important>liara.json</Important> ایجاد کنید و قطعه کد زیر را در آن قرار دهید:
        </p>
        <div className="h-4" />
        <div dir='ltr'>
            <Highlight className="json">
                {`{
    "app": "my-web-app", 
    "port": 80,
    "platform": "dotnet"
}`}
            </Highlight>
        </div>
        <div className='h-4' />
        <p>
            در قطعه کد فوق، در فیلد <Important>app</Important> باید شناسه برنامه خود را به جای <Important>my-web-app</Important> وارد کنید.
            در فیلد <Important>port</Important>، بایستی پورتی را وارد کنید که برنامه‌تان در آن، به درخواست کاربران listen می‌کند. این مقدار به صورت پیش‌فرض، در برنامه‌های NET. لیارا، برابر با 80 است.
            در فیلد<Important>platform</Important> نیز، باید نوع پلتفرم خود را که dotnet است، مشخص کنید. 
        </p>
        <div className="h-4" />

        <p>
            برای تعیین نسخه dotnet برنامه خود نیز، کافیست تا در فایل <Important>liara.json</Important> فیلد <Important>version</Important> را قرار دهید:
        </p>
        <div className="h-4" />
        <div dir='ltr'>
            <Highlight className="json">
                {`{
  "dotnet": {
    "version": "6.0"
  }
}`}
            </Highlight>
        </div>
        <div className='h-4' />
        <Alert variant='success'>همچنین بخوانید:  <a className="blue-link" href="./choose-version">نسخه‌های قابل ارائه NET. در لیارا</a></Alert>
        <p>
            به صورت پیش‌فرض، منطقه‌ی زمانی برنامه‌تان بر روی Asia/Tehran تنظیم شده است؛ برای تغییر مقدار پیش‌فرض، می‌توانید از پارامتر <Important>timezone</Important> در فایل <Important>liara.json</Important> استفاده کنید؛ به عنوان مثال:
        </p>
        <div className="h-4" />
        <div dir='ltr'>
            <Highlight className="json">
                {`{
    "dotnet": {
      "timezone": "America/Los_Angeles"
  }
}`}
            </Highlight>
        </div>
        <div className='h-4' />
        <p>
            لیارا نام فایل Dll نهایی پس از build را به صورت خودکار تشخیص می‌دهد. اما در صورتی که پروژه‌ی شما متشکل از چندین پروژه‌ی دیگر هم باشد، لازم است که نام فایل را بدون پسوند در فیلد <Important>finalDllName</Important> در فایل <Important>liara.json</Important> وارد کنید، به عنوان مثال:
        </p>
        <div className="h-4" />
        <div dir='ltr'>
            <Highlight className="json">
                {`{
  "dotnet": {
    "finalDllName": "MyProjectName"
  }
}`}
            </Highlight>
        </div>
        <div className='h-4' />
        <p>
            در ادامه، لیارا فایل csproj. برنامه‌ی شما را به صورت خودکار تشخیص می‌دهد. اما برای اطمینان بیشتر از استقرار موفق، می‌توانید مسیر این فایل را به صورت نسبی، در فیلد <Important>csprojectFile</Important> در فایل <Important>liara.json</Important> مشخص کنید؛ به عنوان مثال:

        </p>
        <div className="h-4" />
        <div dir='ltr'>
            <Highlight className="json">
                {`{
  "dotnet": {
    "csprojectFile": "path/to/folder/my.csproj"
  }
}`}
            </Highlight>
        </div>
        <div className='h-4' />
        <p>
            در نهایت، یک فایل <Important>liara.json</Important> می‌تواند مانند قطعه کد زیر باشد:
        </p>
        <div className="h-4" />
        <div dir='ltr'>
            <Highlight className="json">
                {`{
    "app": "my-web-app", 
    "port": 80,
    "platform": "dotnet",
    "dotnet": {
      "version": "6.0",
      "timezone": "America/Los_Angeles",
      "finalDllName": "MyProjectName",
      "csprojectFile": "path/to/folder/my.csproj"
    }
}`}
            </Highlight>
        </div>
        <div className='h-4' />
        <Alert variant='success'>همچنین بخوانید: <a className="blue-link" href="../../details/build-location">تعیین موقعیت build برنامه</a></Alert>
        <p>
            اکنون کافیست تا در مسیر اصلی پروژه و جایی که فایل <Important>liara.json</Important> قرار دارد؛ دستور زیر را اجرا کنید و منتظر بمانید تا عملیات استقرار تمام شود:
        </p>
        <div className="h-4" />
        <div dir='ltr'>
            <Highlight className="json">
                {`liara deploy`}
            </Highlight>
        </div>
        <div className='h-4' />
        <p>
            در حین فرایند استقرار، می‌توانید در ترمینال خود، لاگ‌های مربوط به آن را مشاهده بفرمایید.
        </p>
    </>,

]} 
/>


<Alert variant='success'>
<p>
    پس از استقرار برنامه می‌توانید <a href="../../details/events" className="blue-link">رویدادها</a> و <a href="../../details/observations/about" className="blue-link">گزارشات</a> مربوط به برنامه را بررسی کنید.
</p>
</Alert>


<NextPage next="./set-envs" />
</Layout>