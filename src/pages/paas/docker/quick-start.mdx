import Layout from "@/components/Layout";
import Button from "@/components/Common/button";
import Section from "@/components/Common/section";
import Alert from "@/components/Common/alert";
import Tabs from "@/components/Common/tab";
import Step from "@/components/Common/step";
import Card from "@/components/Common/card";
import Important from "@/components/Common/important";
import Highlight from "@/components/Common/highlight";
import Link from "next/link";

import Head from "next/head";

<Layout>
<Head>
<title>مستندات استقرار سریع برنامه‌‌های Docker - لیارا</title>
</Head>

# استقرار سریع برنامه‌های Docker
<hr className="mb-2" />

<Tabs 
  tabs={["Liara Console", "Liara CLI"]} 
  content={[
  <>
  <video
  src="https://files.liara.ir/liara/docker/docker-desktop.mp4"
  controls="controls"
  className="block w-full"
  width="100%"
  ></video>
  <div className="h-2" />
  برای استقرار با استفاده از ابزار <Link className="text-[#2196f3] " href="/references/console/about">Liara Console</Link> کافیست تا مراحل زیر را طی کنید:
  <Step  steps={[
{
  step: "۱",
  content: (
  <>
    <h3>ورود به حساب کاربری</h3>   
    <p>وارد <Link className="text-[#2196f3] " href="https://console.liara.ir">کنسول لیارا</Link> شوید و با وارد کردن ایمیل یا شماره همراه ثبت شده، به اکانت خود در لیارا، لاگین کنید.</p>
  </>
  )
  },
  {
  step: "۲",
  content: (
  <>
    <h3>ایجاد برنامه</h3>
    <p>برنامه Docker خود را با شناسه، <Link className="text-[#2196f3] " href="../details/private-network">شبکه خصوصی</Link> و <Link className="text-[#2196f3] " href="../details/plans/about">منابع سخت‌افزاری و بسته امکانات</Link> مدنظرتان ایجاد کنید.</p>
  </>
  )
  },
  {
  step: "۳",
  content: (
  <>
    <h3>حذف فایل‌های اضافی</h3>
    <p>پوشه‌ها و فایل‌های درون پروژه که قصد ندارید در لیارا آپلود شوند (به عنوان مثال پوشه‌ venv. در برنامه‌های مبتنی بر پایتون یا پوشه node_modules در برنامه‌های مبتنی بر NodeJS) را پاک کنید.</p>  
  </>
  )
  },
  {
  step: "۴",
  content: (
  <>
    <h3>ایجاد Dockerfile</h3>
    <p>
      در مسیر اصلی پروژه، یک فایل به نام <Important>Dockerfile</Important> ایجاد کنید و بنا به نیازهای پروژه خود، دستورات مرتبط را درون این فایل، قرار دهید تا پروژه‌تان Dockerize شود. به عنوان مثال، اگر که برنامه‌تان مبتنی بر فریم‌ورک Golang است، می‌توانید قطعه کد زیر را در <Important>Dockerfile</Important>، قرار دهید:    
    </p>
    <div className="h-2" />
    <div dir='ltr'>
    <Highlight className="docker">
      {`# Use the official Golang image as the base image
FROM golang:latest
        
# Set the working directory inside the container
WORKDIR /app

# Copy the local code to the container
COPY . .

# Download Go modules
RUN go mod download

# Build the Go application
RUN go build -o main .

# Expose port 8080 to the outside world
# EXPOSE 8080

# Command to run the executable
CMD ["./main"]`}
    </Highlight>
    </div>
        <div className="h-2" />
    <Alert variant="info">
    <p>
      شما می‌توانید با استفاده از دستور <Important>EXPOSE</Important> پورتی که برنامه توسط آن به درخواست کاربران گوش می‌دهد را مشخص کنید. البته چون که در حین استقرار، لیارا از شما port برنامه را می‌پرسد بنابراین برای استقرار برنامه‌های داکرایز شده در لیارا، نیازی به نوشتن این دستور در <Important>Dockerfile</Important> نیست.
    </p>
    </Alert>
  </>
  )
  },
  {
  step: "۵",
  content: (
  <>
    <h3>زیپ و آپلود پروژه</h3>
    <p>پوشه پروژه را در یک فایل <Important>zip</Important> قرار دهید. فایل را کشیده و در باکس آپلود Liara Console رها کنید.</p>
  </>
  )
  },
  {
  step: "۶",
  content: (
  <>
    <h3>استقرار پروژه</h3>
    <p>مرحله به مرحله استقرار را با Console جلو بروید و شخصی‌سازی‌های لازم را انجام دهید و در نهایت بر روی گزینه استقرار کلیک کنید تا عملیات استقرار، آغاز شود. </p>
  </>
  )
  }

]}/>
  </>,

  <>
  <video
  src="https://files.liara.ir/liara/quick-start/docker/docker-cli.mp4"
  controls="controls"
  className="block w-full"
  width="100%"
  ></video>
  <div className="h-2" />

  برای استقرار با استفاده از ابزار <Link className="text-[#2196f3] " href="../../../references/cli/about">Liara CLI</Link> کافیست تا مراحل زیر را طی کنید:
  <Step  steps={[
{
  step: "۱",
  content: (
  <>
    <h3>نصب Liara CLI</h3>
    <p>ترمینال را باز کنید و با اجرای دستور زیر، ابزار Liara CLI را بر روی سیستم خود نصب کنید:</p>
    <div dir='ltr'>
      <Highlight className="bash">
        {`npm install -g @liara/cli`}
      </Highlight>
    </div>
    <div className="h-2" />
    <Alert variant="info">
    <p>
    دقت کنید که <Link className="text-[#2196f3] " href="https://nodejs.org">npm و NodeJS</Link> باید بر روی سیستم‌عامل‌تان نصب باشد.
    </p>
    </Alert>
    <div className="h-2" />
    <Alert variant="warning">در ویندوز، ترمینال باید بر روی CMD تنظیم باشد.</Alert>
  </>
  )
  },
  {
  step: "۲",
  content: (
  <>
    <h3>لاگین به حساب کاربری</h3>
    <p>با اجرای دستور زیر، وارد حساب کاربری خود در لیارا، شوید:</p>
    <div dir='ltr'>
      <Highlight className="bash">
        {`liara login`}
      </Highlight>
    </div>
  </>
  )
  },
  {
  step: "۳",
  content: (
  <>
    <h3>ایجاد شبکه خصوصی</h3>
    <p>با دستور زیر، <Link className="text-[#2196f3] " href="../details/private-network">شبکه خصوصی</Link> برنامه خود را ایجاد کنید:</p>
    <div dir='ltr'>
      <Highlight className="bash">
        {`liara network create`}
      </Highlight>
    </div>
    <div className="h-2" />
    <Alert variant="info">اگر که از قبل شبکه خصوصی ایجاد کرده‌اید؛ نیازی به انجام این کار نیست.</Alert>
  </>
  )
  },
  {
  step: "۴",
  content: (
  <>
    <h3>ایجاد برنامه</h3>
    <p>با اجرای دستور زیر، برنامه Docker خود را ایجاد کنید:</p>
    <div dir='ltr'>
    <Highlight className="bash">
      {`liara create`}
    </Highlight>
    </div>
    <div className="h-2" />
    <Alert variant="info">اگر که از قبل برنامه خود را ایجاد کرده‌اید؛ نیازی به انجام این کار نیست.</Alert>
    <p>در ادامه اجرای این دستور، باید به ترتیب، شناسه، نوع پلتفرم (که باید بر روی docker تنظیم شود)، شبکه خصوصی و <Link className="text-[#2196f3] " href="../details/plans/about">منابع سخت‌افزاری و بسته امکانات برنامه</Link>، مشخص شوند.</p>
  </>
  )
  },
  {
  step: "۵",
  content: (
  <>
    <h3>نادیده گرفتن فایل‌های اضافی</h3>
    <p>برای آپلود نشدن فایل‌های اضافی، از <Important>gitignore.</Important> یا <Important>liaraignore.</Important> یا <Important>dockerignore.</Important> استفاده کنید و درون یکی از این سه فایل، اسامی دایرکتوری‌ها و فایل‌های اضافی را بیاورید. به عنوان مثال:</p>
    <div dir='ltr'>
    <Highlight className="gitignore">
      {`.env
.vscode/
.idea/
*.sublime-project
*.sublime-workspace`}
    </Highlight>
    </div>
  </>
  )
  },
  {
  step: "۶",
  content: (
  <>
        <h3>ایجاد Dockerfile</h3>
    <p>
      در مسیر اصلی پروژه، یک فایل به نام <Important>Dockerfile</Important> ایجاد کنید و بنا به نیازهای پروژه خود، دستورات مرتبط را درون این فایل، قرار دهید تا پروژه‌تان Dockerize شود. 
      به عنوان مثال، اگر که برنامه‌تان مبتنی بر فریم‌ورک Golang است، می‌توانید قطعه کد زیر را در <Important>Dockerfile</Important>، قرار دهید:    
    </p>
    <div className="h-2" />
    <div dir='ltr'>
    <Highlight className="docker">
      {`# Use the official Golang image as the base image
FROM golang:latest
        
# Set the working directory inside the container
WORKDIR /app

# Copy the local code to the container
COPY . .

# Download Go modules
RUN go mod download

# Build the Go application
RUN go build -o main .

# Expose port 8080 to the outside world
# EXPOSE 8080

# Command to run the executable
CMD ["./main"]`}
    </Highlight>
    </div>
    <div className="h-2" />
    <Alert variant="info">
    <p>
      شما می‌توانید با استفاده از دستور <Important>EXPOSE</Important> پورتی که برنامه توسط آن به درخواست کاربران گوش می‌دهد را مشخص کنید. البته چون که در حین استقرار، لیارا از شما port برنامه را می‌پرسد بنابراین برای استقرار برنامه‌های داکرایز شده در لیارا، نیازی به نوشتن این دستور در <Important>Dockerfile</Important> نیست.
    </p>
    </Alert>
  </>
  )
  },
  {
  step: "۷",
  content: (
  <>
    <h3>استقرار برنامه</h3>
    <p>با اجرای دستور زیر در مسیر اصلی پروژه، برنامه خود را  در لیارا مستقر کنید (بعد از <Important>app--</Important> شناسه برنامه و بعد از <Important>port--</Important>، پورتی که برنامه در آن، به درخواست کاربران، گوش می‌دهد را، وارد کنید):</p>
    <div className="h-2" />
    <div dir='ltr'>
    <Highlight className="bash">
      {`liara deploy --app=myapp --platform=docker --port=8080`}
    </Highlight>
    </div>
  </>
  )
  }

]}/>
  </>,

]} 
/>

<br/>   
<Alert variant="info">
<p>
پس از استقرار، برنامه‌ی شما در سرورهای لیارا build شده و image نهایی در <a href="../details/private-registry" className="text-[#2196f3] ">registry خصوصی</a> شما در لیارا ذخیره خواهد شد.
</p>
</Alert>
<div className="h-1" />
<Alert variant="warning">
<p>
در هر برنامه داکر در لیارا، شما می‌توانید فقط پورت یک وب‌سرور با پروتکل HTTP را Expose کنید. به عنوان مثال، پورت یک دیتابیس، خارج از شبکه خصوصی، در دسترس نیست و تنها در بین برنامه‌های موجود در شبکه خصوصی، قابل دسترسی است.
</p>
</Alert>
<div className="h-1" />

<div className="h-1" />

<Alert variant="success">
<p>
همچنین بخوانید: <Link className="text-[#2196f3] " href="./how-tos/create-app">استقرار قدم به قدم برنامه‌های Docker در لیارا</Link>
</p>
</Alert>
</Layout>