gzip on;
gzip_disable "msie6";
gzip_vary on;
gzip_proxied any;
gzip_comp_level 6;
gzip_types text/plain text/css application/json application/javascript application/x-javascript text/xml application/xml application/xml+rss text/javascript image/svg+xml;

error_page 404 /404.html;
error_page 403 =404 /404.html;

location = /404.html {
  internal;
}

location / {
  try_files $uri $uri/ $uri.html =404;
}

# NodeJS
location ~ ^/app-deploy/nodejs/getting-started/?$ {
  return 301 /paas/nodejs/getting-started;
}

location ~ ^/app-deploy/nodejs/(browser|cli)/?$ {
  return 301 /paas/nodejs/quick-start;
}

location ~ ^/app-deploy/nodejs/envs/?$ {
  return 301 /paas/nodejs/how-tos/set-envs;
}

location ~ ^/app-deploy/nodejs/logs/?$ {
  return 301 /paas/nodejs/how-tos/set-logs;
}

location ~ ^/app-deploy/nodejs/liarajson/?$ {
  return 301 /paas/nodejs/quick-start;
}

location ~ ^/app-deploy/nodejs/dbs/?$ {
  return 301 /paas/nodejs/how-tos/connect-to-db/about;
}

location ~ ^/nodejs/disks/?$ {
  return 301 /paas/nodejs/how-tos/use-disk;
}

location ~ ^/app-deploy/nodejs/object-storage/?$ {
  return 301 /object-storage/how-tos/connect-via-platform/nodejs;
}

location ~ ^/app-deploy/nodejs/websocket/?$ {
  return 301 /paas/nodejs/how-tos/use-websocket;
}

location ~ ^/app-deploy/nodejs/email/?$ {
  return 301 /email-server/how-tos/connect-via-platform/nodejs;
}

location ~ ^/app-deploy/nodejs/hooks/?$ {
  return 301 /paas/nodejs/how-tos/use-hooks;
}

location ~ ^/app-deploy/nodejs/tips/?$ {
  return 301 /paas/nodejs/how-tos/create-app;
}

# NextJS
location ~ ^/app-deploy/nextjs/getting-started/?$ {
  return 301 /paas/nextjs/getting-started;
}

location ~ ^/app-deploy/nextjs/(browser|cli)/?$ {
  return 301 /paas/nextjs/quick-start;
}

location ~ ^/app-deploy/nodejs/envs/?$ {
  return 301 /paas/nextjs/how-tos/set-envs;
}

location ~ ^/app-deploy/nextjs/logs/?$ {
  return 301 /paas/nextjs/how-tos/set-logs;
}

location ~ ^/app-deploy/nextjs/liarajson/?$ {
  return 301 /paas/nextjs/quick-start;
}

location ~ ^/app-deploy/nextjs/dbs/?$ {
  return 301 /paas/nextjs/how-tos/connect-to-db/about;
}

location ~ ^/app-deploy/nextjs/object-storage/?$ {
  return 301 /object-storage/how-tos/connect-via-platform/nextjs;
}

location ~ ^/app-deploy/nextjs/email/?$ {
  return 301 /email-server/how-tos/connect-via-platform/nextjs;
}

location ~ ^/app-deploy/nextjs/hooks/?$ {
  return 301 /paas/nextjs/how-tos/use-hooks;
}

location ~ ^/app-deploy/nextjs/tips/?$ {
  return 301 /paas/nextjs/how-tos/create-app;
}

# Laravel
location ~ ^/app-deploy/laravel/getting-started/?$ {
  return 301 /paas/laravel/getting-started;
}

location ~ ^/app-deploy/laravel/(browser|cli)/?$ {
  return 301 /paas/laravel/quick-start;
}

location ~ ^/app-deploy/laravel/envs/?$ {
  return 301 /paas/laravel/how-tos/set-envs;
}

location ~ ^/app-deploy/laravel/logs/?$ {
  return 301 /paas/laravel/how-tos/manage-laravel-logs;
}

location ~ ^/app-deploy/laravel/liarajson/?$ {
  return 301 /paas/laravel/quick-start;
}

location ~ ^/app-deploy/laravel/dbs/?$ {
  return 301 /paas/laravel/how-tos/connect-to-db/about;
}

location ~ ^/app-deploy/laravel/migrations/?$ {
  return 301 /paas/laravel/how-tos/connect-to-db/about;
}

location ~ ^/laravel/disks/?$ {
  return 301 /paas/laravel/how-tos/use-disk;
}

location ~ ^/app-deploy/laravel/object-storage/?$ {
  return 301 /object-storage/how-tos/connect-via-platform/laravel;
}

location ~ ^/app-deploy/laravel/email/?$ {
  return 301 /email-server/how-tos/connect-via-platform/laravel;
}

location ~ ^/app-deploy/laravel/hooks/?$ {
  return 301 /paas/laravel/how-tos/use-hooks;
}

location ~ ^/app-deploy/laravel/soketi/?$ {
  return 301 /one-click-apps/soketi/how-tos/connect-by-laravel;
}

# PHP
location ~ ^/app-deploy/php/getting-started/?$ {
  return 301 /paas/php/getting-started;
}

location ~ ^/app-deploy/php/(browser|cli)/?$ {
  return 301 /paas/php/quick-start;
}

location ~ ^/app-deploy/php/envs/?$ {
  return 301 /paas/php/how-tos/set-envs;
}

location ~ ^/app-deploy/php/logs/?$ {
  return 301 /paas/php/how-tos/set-logs;
}

location ~ ^/app-deploy/php/liarajson/?$ {
  return 301 /paas/php/quick-start;
}

location ~ ^/app-deploy/php/dbs/?$ {
  return 301 /paas/php/how-tos/connect-to-db/about;
}

location ~ ^/app-deploy/php/migrations/?$ {
  return 301 /paas/php/how-tos/connect-to-db/about;
}

location ~ ^/php/disks/?$ {
  return 301 /paas/php/how-tos/use-disk;
}

location ~ ^/app-deploy/php/object-storage/?$ {
  return 301 /object-storage/how-tos/connect-via-platform/php;
}

location ~ ^/app-deploy/php/email/?$ {
  return 301 /email-server/how-tos/connect-via-platform/php;
}

location ~ ^/app-deploy/php/hooks/?$ {
  return 301 /paas/php/how-tos/use-hooks;
}

location ~ ^/app-deploy/php/soketi/?$ {
  return 301 /one-click-apps/soketi/how-tos/connect-by-php;
}


# general stuff
location ~ ^/app-deploy/[^/]+/update/?$ {
  return 301 /paas/update;
}











# Media: images, icons, video, audio, HTC
location ~* \.(?:jpg|jpeg|gif|png|ico|cur|gz|svg|svgz|mp4|ogg|ogv|webm|htc)$ {
  expires 1M;
  access_log off;
  add_header Cache-Control "public";
}

# CSS, Javascript and Fonts
location ~* \.(?:css|js|otf|ttf|eot|woff|woff2)$ {
  expires 1y;
  access_log off;
  add_header Cache-Control "public";
}